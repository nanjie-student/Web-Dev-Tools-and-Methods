{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://nanjie/./src/controller.js","webpack://nanjie/./src/react.js","webpack://nanjie/./src/storage.js","webpack://nanjie/webpack/bootstrap","webpack://nanjie/./src/index.js"],"sourcesContent":["const react = require(\"./react.js\");\nconst storage = require(\"./storage\");\n\nconst controller = {\n  user: {\n    fetchSession() {\n      storage.username = undefined;\n      storage.wordList = undefined;\n      return fetch(\"/api/session\")\n        .catch((err) => {\n          return Promise.reject(err);\n        })\n        .then((res) => {\n          if (!res.ok) {\n            return Promise.reject({ err: \"Invalid User\" });\n          }\n          return res.json();\n        })\n        .then((res) => {\n          storage.username = res.username;\n          return controller.word.fetchWord();\n        })\n        .then((res) => {\n          storage.wordList = res.storedWord;\n        });\n    },\n\n    fetchLogin(username) {\n      const session = fetch(\"/api/session/\", {\n        method: \"PUT\",\n        headers: {\n          \"content-type\": \"application/json\", // set this header when sending JSON in the body of request\n        },\n        body: JSON.stringify({ username }),\n      })\n        .catch((err) => {\n          storage.errMsg = \"Network Error, try again\";\n          return Promise.reject({ error: \"network-error\" });\n        })\n        .then((response) => {\n          if (!response.ok) {\n            return response.json().then((err) => {\n              storage.errMsg = \"Invalid Credential, try again\";\n              react.render();\n              return Promise.reject(err);\n            });\n          }\n          return response.json();\n        })\n        .then((response) => {\n          storage.username = response.username;\n        });\n      return session;\n    },\n\n    fetchLogout() {\n      const session = fetch(\"/api/session/\", {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\", // set this header when sending JSON in the body of request\n        },\n      }).catch((err) => Promise.reject({ error: \"network-error\" }));\n      return session;\n    },\n  },\n  word: {\n    fetchWord() {\n      return fetch(\"/api/word\", {\n        method: \"GET\",\n      })\n        .catch((err) => {\n          storage.errMsg = \"Network Error, try again\";\n        })\n        .then((response) => {\n          if (!response.ok) {\n            return response.json().then((err) => {\n              storage.errMsg = \"Error fetching words, try again\";\n              return Promise.reject(err);\n            });\n          }\n          return response.json();\n        });\n    },\n\n    addWord(word) {\n      return fetch(\"/api/word\", {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\",\n        },\n        body: JSON.stringify({ word }),\n      })\n        .catch((err) => {\n          storage.errMsg = \"Network Error, try again\";\n          return Promise.reject(err);\n        })\n        .then((response) => {\n          if (!response.ok) {\n            return response.json().then((err) => {\n              storage.errMsg = `Error adding word ${word}, try again`;\n            });\n          }\n          return response.json();\n        })\n        .then((response) => (storage.wordList = response.storedWord));\n    },\n  },\n\n  initEventListener() {\n    const appEl = document.querySelector(\"#app\");\n    appEl.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      storage.errMsg = \"\";\n      switch (e.target.className) {\n        case \"username-submit\":\n          const usernameEl = document.querySelector(\".username-input\");\n          controller.user\n            .fetchLogin(usernameEl.value)\n            .then(() => controller.word.fetchWord())\n            .then(() => react.render());\n          break;\n        case \"logout\":\n          controller.user.fetchLogout().then(() => {\n            storage.username = undefined;\n            storage.wordList = [];\n            react.render();\n          });\n          break;\n        case \"word-submit\":\n          const wordInputEl = document.querySelector(\".word-input\");\n          controller.word\n            .addWord(wordInputEl.value)\n            .then(() => controller.word.fetchWord())\n            .then(() => react.render());\n          break;\n        default:\n          break;\n      }\n    });\n  },\n};\nmodule.exports = controller;\n","const controller = require(\"./controller.js\");\nconst storage = require(\"./storage.js\");\n\nconst react = {\n  render() {\n    react.renderUserStatus();\n    react.renderErrMsg();\n    react.renderLoginForm();\n    react.renderWordForm();\n  },\n  renderUserStatus() {\n    const userEl = document.querySelector(\".user\");\n    const isLoggedIn = storage.username !== undefined;\n    const loginHTML = `<a href=\"\" class=\"login\">Log In</a>`;\n    const logoutHTML = `<a href=\"\" class=\"logout\">Log out</a>`;\n    userEl.innerHTML = isLoggedIn ? logoutHTML : loginHTML;\n  },\n\n  renderLoginForm() {\n    const loginEl = document.querySelector(\".login-form\");\n    if (!storage.username) {\n      loginEl.innerHTML = `\n          <form action=\"\">\n              <label>Username: <input type=\"text\" class=\"username-input\"></label>\n              <button type=\"submit\" class=\"username-submit\">Submit</button>\n          </form>\n          `;\n    } else {\n      loginEl.innerHTML = \"\";\n    }\n  },\n  renderWordForm() {\n    const wordList = storage.wordList;\n    const wordEl = document.querySelector(\".words\");\n    if (storage.username) {\n      const wordListHTML = wordList\n        ? `<p>Your word is ${wordList} </p>`\n        : `<p>You do not have any word</p>`;\n      const wordInputHTML = `\n    <form action=\"\">\n      <label>\n        Update word: <input type=\"text\" class=\"word-input\"></input>\n      </label>\n      <button class='word-submit' type=\"submit\">Submit</button>\n    </form>`;\n      wordEl.innerHTML = [wordListHTML, wordInputHTML].join(\"\");\n    } else {\n      wordEl.innerHTML = \"\";\n    }\n  },\n  renderErrMsg() {\n    const errorMsgEl = document.querySelector(\".error-msg\");\n    if (storage.errMsg) {\n      errorMsgEl.innerHTML = `<p>${storage.errMsg}</p>`;\n    } else {\n      errorMsgEl.innerHTML = \"\";\n    }\n  },\n};\n\nmodule.exports = react;","const storage = {\n  username: undefined,\n  wordList: undefined,\n  errMsg: \"\",\n};\n\nmodule.exports = storage;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const controller = require(\"./controller.js\");\nconst react = require(\"./react.js\");\ncontroller.initEventListener();\ncontroller.user.fetchSession().then(() => react.render()); // Render for a resumed session\nreact.render(); // Render for a new session"],"names":["react","require","storage","controller","user","fetchSession","username","undefined","wordList","fetch","err","Promise","reject","then","res","ok","json","word","fetchWord","storedWord","fetchLogin","session","method","headers","body","JSON","stringify","errMsg","error","response","render","fetchLogout","addWord","concat","initEventListener","appEl","document","querySelector","addEventListener","e","preventDefault","target","className","usernameEl","value","wordInputEl","module","exports","renderUserStatus","renderErrMsg","renderLoginForm","renderWordForm","userEl","isLoggedIn","loginHTML","logoutHTML","innerHTML","loginEl","wordEl","wordListHTML","wordInputHTML","join","errorMsgEl"],"sourceRoot":""}